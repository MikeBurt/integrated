<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <title>Integrated</title>


        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism-coy.min.css">

        
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body>
        <div class="container">
            <section class="hero is-dark is-bold">
    <div class="hero-head">
        <nav class="nav has-shadow is-success">
            <div class="container">
                <div class="nav-left">
                    <a href="/" class="title nav-item is-tab">Integrated</a>
                </div>
                <div class="nav-right">
                    <a href="/apidocs" class="nav-item is-tab">
                        API Docs
                    </a>
                    <a href="https://github.com/elpete/integrated" class="nav-item is-tab">
                        GitHub&nbsp;&nbsp;<i class="fa fa-github"></i>
                    </a>
                </div>
            </div>
        </nav>
    </div>
</section>
            <section class="section">
    <div class="container is-fullwidth">
        <label class="label title is-1" for="docsearch">Search documentation</label>
        <br />
        <p class="control">
          <input id="docsearch" class="input is-fullwidth is-large" type="text" placeholder="Search documentation â€” powered by Algolia" autofocus>
        </p>
    </div>
</section>



            <section class="section">
    <div class="columns">
        <div class="column is-3">
            <div class="column">
                <aside class="menu">
                    <p class="menu-label">Assertion Methods</p>
                    <ul class="menu-list">
                        <li><a href="/dontSee" class="">dontSee</a></li>
                        <li><a href="/dontSeeElement" class="">dontSeeElement</a></li>
                        <li><a href="/dontSeeInCollection" class="">dontSeeInCollection</a></li>
                        <li><a href="/dontSeeInElement" class="">dontSeeInElement</a></li>
                        <li><a href="/dontSeeInField" class="">dontSeeInField</a></li>
                        <li><a href="/dontSeeInTable" class="">dontSeeInTable</a></li>
                        <li><a href="/dontSeeIsChecked" class="">dontSeeIsChecked</a></li>
                        <li><a href="/dontSeeIsSelected" class="">dontSeeIsSelected</a></li>
                        <li><a href="/dontSeeLink" class="">dontSeeLink</a></li>
                        <li><a href="/see" class="">see</a></li>
                        <li><a href="/seeActionIs" class="">seeActionIs</a></li>
                        <li><a href="/seeControllerIs" class="">seeControllerIs</a></li>
                        <li><a href="/seeElement" class="">seeElement</a></li>
                        <li><a href="/seeEventIs" class="">seeEventIs</a></li>
                        <li><a href="/seeHandlerIs" class="">seeHandlerIs</a></li>
                        <li><a href="/seeInCollection" class="">seeInCollection</a></li>
                        <li><a href="/seeInElement" class="">seeInElement</a></li>
                        <li><a href="/seeInField" class="">seeInField</a></li>
                        <li><a href="/seeInTable" class="">seeInTable</a></li>
                        <li><a href="/seeIsChecked" class="">seeIsChecked</a></li>
                        <li><a href="/seeIsSelected" class="">seeIsSelected</a></li>
                        <li><a href="/seeLink" class="">seeLink</a></li>
                        <li><a href="/seePageIs" class="">seePageIs</a></li>
                        <li><a href="/seeTitleIs" class="">seeTitleIs</a></li>
                        <li><a href="/seeViewIs" class="">seeViewIs</a></li>
                    </ul>
                    <p class="menu-label">Interaction Methods</p>
                    <ul class="menu-list">
                        <li><a href="/check" class="">check</a></li></li>
                        <li><a href="/click" class="">click</a></li></li>
                        <li><a href="/makeRequest" class="">makeRequest</a></li></li>
                        <li><a href="/press" class="">press</a></li></li>
                        <li><a href="/select" class="">select</a></li></li>
                        <li><a href="/submitForm" class="">submitForm</a></li></li>
                        <li><a href="/type" class="">type</a></li></li>
                        <li><a href="/uncheck" class="">uncheck</a></li></li>
                        <li><a href="/visit" class="">visit</a></li></li>
                        <li><a href="/visitEvent" class="">visitEvent</a></li></li>
                    </ul>
                    <p class="menu-label">Debug Methods</p>
                    <ul class="menu-list">
                        <li><a href="/debugPage" class="">debugPage</a></li></li>
                        <li><a href="/debugEvent" class="">debugEvent</a></li></li>
                        <li><a href="/debugCollection" class="">debugCollection</a></li></li>
                        <li><a href="/debugPrivateCollection" class="">debugPrivateCollection</a></li></li>
                    </ul>
                    <p class="menu-label">Extending Integrated</p>
                    <ul class="menu-list">
                        <li><a href="/under-the-hood" class="">Under the Hood</a></li></li>
                        <li><a href="/custom-engines" class="">Custom Engines</a></li></li>
                        <li><a href="/custom-base-specs" class="">Custom Base Specs</a></li></li>
                    </ul>
                </aside>
            </div>
        </div>

        <div class="column">
            <h1 class="title is-1">Integrated</h1>
<h2 class="subtitle is-3">A TestBox package for even better Integration tests in ColdBox!</h2>
<p><br /></p>
<h3 class="title is-3">Requirements</h3>
<p class="content">Requires ColdBox 4.2+ and TestBox 2.3+</p>
<h3 class="title is-3">Installation</h3>
<p>Install the package from ForgeBox:</p>
<pre><code class="language-bash">box install integrated</code></pre>
<p><strong>Important:</strong>
Add the Integrated lib directory to <code>this.javaSettings</code> in your <code>*tests*</code> directory's <code>Application.cfc</code>.</p>
<pre><code class="language-js">this.javaSettings = { loadPaths = [ "Integrated/lib" ], reloadOnChange = false };</code></pre>
<h3>Usage</h3>
<p>Change your Integration tests to extend from <code>Integration.BaseSpecs.ColdBoxBaseSpec</code>. (Make sure to call the parent class's <code>beforeAll</code> method.)</p>
<pre><code class="language-js">component extends="Integrated.BaseSpecs.ColdBoxBaseSpec" {
    function beforeAll() {
        // Make sure to call the parent class's beforeAll() and afterAll() methods.
        super.beforeAll();
    }

    function afterAll() {
        super.afterAll();
    }
}</code></pre>
<p>Start using an easy, fluent API for your integration tests!</p>
<pre><code class="language-js">function run() {
    describe( "Registering", function() {
        it( "allows a new user to register for the site", function() {
            this.visitEvent('register.new')
                .type('Eric', 'name')
                .type('mYAw$someP2ssw0rd!', 'password')
                .press('Register')
                .seeTitleIs('Home')
                .seeOnPage('Welcome, Eric!');
        });
    });
}</code></pre>
<p>You can see all the different methods you can call in the <a href="http://elpete.github.io/integrated/">API docs</a>.</p>
<p>You can add automatic database transactions by adding one line to the top of your spec:</p>
<pre><code class="language-js">component extends="Integrated.BaseSpecs.ColdBoxBaseSpec" {

    this.useDatabaseTransactions = true;

    function run() {
        describe( "Registering", function() {
            it( "allows a new user to register for the site", function() {
                this.visitEvent('register.new')
                    .type('Eric', 'name')
                    .type('mYAw$someP2ssw0rd!', 'password')
                    .press('Register')
                    .seeTitleIs('Home')
                    .seeOnPage('Welcome, Eric!');
            });
        });
    }
}</code></pre>
<p>Easily add database transactions around your tests by adding this one property to your test:</p>
<pre><code class="language-js">this.useDatabaseTransactions = true;</code></pre>
<p>By default, we clear out the session scope on each request.  If you want to persist the session scope across requests, simply add <code>this.persistSessionScope = true;</code> to the top of your spec.  <strong>Note:</strong> this will happen for all tests in the file.</p>
<h3>Creating Framework-specific BaseSpecs</h3>
<p>To create your own framework specific BaseSpec, first extend the <code>Integrated.BaseSpecs.AbstractBaseSpec</code> component.</p>
<pre><code class="language-js">component extends="Integrated.BaseSpecs.AbstractBaseSpec" {
    function beforeAll() {
    // IMPORTANT!  Don't forget to call `beforeAll()` and `afterAll()`!
        super.beforeAll(
            // your setup here
        );
    }

    function afterAll() {
        super.afterAll();
    }
}</code></pre>
<p>The <code>beforeAll</code> method takes four separate engines that drive Integrated:</p>
<pre><code class="language-js">/**
* Sets up the needed dependancies for Integrated.
*
* @requestEngine Integrated.Engines.Request.Contracts.RequestEngine
* @frameworkEngine Integrated.Engines.Assertion.Contracts.FrameworkAssertionEngine
* @domEngine Integrated.Engines.Assertion.Contracts.DOMAssertionEngine
* @interactionEngine Integrated.Engines.Interaction.Contracts.InteractionEngine
*
* @return Integrated.BaseSpecs.AbstractBaseSpec
*/
public AbstractBaseSpec function beforeAll(
    required RequestEngine requestEngine,
    required FrameworkAssertionEngine frameworkEngine,
    required DOMAssertionEngine domEngine,
    required InteractionEngine interactionEngine
);</code></pre>
<p>In your base spec, you can return any combination of these four engines to power Integrated.  For instance, you may wish to specify a different <code>RequestEngine</code> and <code>FrameworkAssertionEngine</code> for your new base spec but  use JSoup for the <code>DOMAssertionEngine</code> and the <code>InteractionEngine</code>.  Or, you could use Selenium based engines for every one of the required engines.  It's up to you.</p>
<p>You can look at <a href="https://github.com/elpete/integrated/blob/master/BaseSpecs/ColdBoxBaseSpec.cfc"><code>Integrated.BaseSpecs.ColdBoxBaseSpec</code></a> for how this is done for ColdBox.</p>
<p>Each engine has an Interface that new engines must conform to as well as an abstract spec they should pass.</p>
<pre><code class="language-js">// Integrated.Engines.Request.MyAwesomeRequestEngine
component implements="Integrated.Engines.Request.Contracts.RequestEngine" {
    // your implementation here
}</code></pre>
<pre><code class="language-js">component extends="tests.specs.unit.Engines.Request.Contracts.RequestEngineTest" {

    function getCUT() {
        return new Integrated.Engines.Request.MyAwesomeRequestEngine();
    }

}</code></pre>
<p><strong>Note:</strong> each engine's abstract spec may be slightly different in how they are set up.  Take a <a href="https://github.com/elpete/integrated/blob/master/tests/specs/unit/Engines/Assertion/Contracts/DOMAssertionEngineTest.cfc">look</a> <a href="https://github.com/elpete/integrated/blob/master/tests/specs/unit/Engines/Assertion/Contracts/FrameworkAssertionEngineTest.cfc">at</a> <a href="https://github.com/elpete/integrated/blob/master/tests/specs/unit/Engines/Interaction/Contracts/InteractionEngineTest.cfc">the</a> <a href="https://github.com/elpete/integrated/blob/master/tests/specs/unit/Engines/Request/Contracts/RequestEngineTest.cfc">specs</a> to see the details.</p>
<h3>Credits</h3>
<p>This package is <strong>heavily</strong> inspired by <a href="https://github.com/laracasts/Integrated">Jeffrey Way's Integrated package for Laravel</a>.
I learned about it at <a href="https://laracasts.com/">Laracasts</a>, which I consider my best programming resource <em>regardless</em> of the fact that I have never deployed a line of PHP code.</p>
        </div>
    </div>
</section>            
            <footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <p>
                <strong>Integrated</strong> by <a href="http://dev.elpete.com">Eric Peterson</a>. The source code is licensed
                <a href="http://opensource.org/licenses/mit-license.php">MIT</a>.
            </p>
        </div>
    </div>
</footer>        </div>


        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.min.js"></script>
            <script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script type="text/javascript">
        docsearch({
            apiKey: '<YOUR_API_KEY>',
            indexName: '<YOUR_INDEX_NAME>',
            inputSelector: '#docsearch'
        });
    </script>
    </body>
</html>
